<!--
Author: Felix Guo
Copyright Felix Guo 2016
-->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
		<title>WendyScript Documentation</title>

		<!-- Bootstrap -->
		<link href="bootstrap.css" rel="stylesheet">
		
		<!--Google Font Links-->
		
		<link href='//fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
		<link href='//fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
		
		
		<link rel="icon" type="image/png" href="../images/icon.png">

		<link rel="stylesheet" href="main.css" type="text/css">
		
		<link rel="stylesheet" href="wendyHighlighting.css" type="text/css">
	</head>
	<body>
	 	<div class="mainContainer">
			<div class="row title">
				<div class="col-md-12">
					<h1>Wendy<span>Script</span></h1>
					<h2>Documentation 1.1</h2>
				</div>
			</div>
			<div class="row">
				<div class="col-md-9 col-md-push-3 content">
					<!-- content -->
					<h1 style="margin-top:0px" id="gettingstarted">Getting Started</h1>
					<p><a href="https://www.student.cs.uwaterloo.ca/~f28guo/" class="btn btn-lg btn-success">Try it online!</a></p>
					<p>You can also check out the source code for the WendyScript interpreter at: <a href="https://github.com/fg123/wendy">GitHub</a>.
					<br> The source is entirely in C and you are welcome to clone and build it yourself. Wendy can be run
					either with a file or in REPL mode.</p>
					<p>By typing <code>wendy</code> into the console, wendy will be run in REPL mode. Otherwise: </p>
					<pre><code>wendy <i>filename.w</i></code></pre>

					<h1 style="margin-top:0px" id="introduction">Introduction</h1>
					<p>Welcome to WendyScript, a C-syntax based scripting language! 
						Let's start with the most basic: outputting "Hello World!".</p>
					<pre><code>"Hello World!";</code></pre>
					<p>This will output <code>Hello World!</code> to the console.</p>
					<p>You may have noticed that we did not need to use a print function. This is because
						expressions evaluated at the top-level will be printed out in the console by WendyScript.</p>
					<p>Each top-level expression will be printed on seperate lines (the newline character follows the expression). For example:</p>
<pre><code>"Hello World!";
"This is on a new line!";</code></pre>
					<pre>Hello World!<br>This is on a new line!</pre>
					<p>This behaviour can be negated by adding a <code>@</code> character in the front of 
					any top-level expression:</p>
					<pre><code>@"Hello World!";
"This is on a new line!";</code></pre><pre><code>Hello World!This is on a newline!</code></pre>


					<h1 id="constants">Variables</h1>
					<p>WendyScript is dynamically typed and supports three (+ null) types of data: numbers, strings, and boolean values.</p>
<pre><code>let name = "Wendy"; // declares and sets a string variable
let age = 18; // declares and set a number variable 
let x; // declares x and sets it to &lt;none&gt;, a NULL type
let valid_license = true; // declares and sets a boolean variable

set age = 19; // mutates the value of age to be 19
set name = 20; // dynamic types allows variable types to be changed</code></pre>	
					<p>WendyScript also supports two special commands for numeric typed variables: <code>inc</code> and <code>dec</code>.
					These functions can be called to add 1 or subtract 1 to a variable respectively.</p>
<pre><code>let number = 9;
inc number; // number is now 10
dec number; // number is now 9</code></pre>	
					<div class="alert alert-warning" role="alert"><b>Note: </b><code>inc</code> and <code>dec</code> can only be called
					on variables that are numbers. Calling on a variable with string value will throw an error.</div>

					<h1 id="operators">Operators</h1>
					<p>Operators in WendyScript are shown below.</p>
					<pre><code>10 + 10; // Addition
9 - 2; // Subtraction
3 * 8; // Multiplication
10 / 4; // Floating Point Division
10 \ 4; // Integer Division
((1 + 2) * 10) / (5 * 3); // Any Combination
"Hello " + "World!"; // String Concatenation 

// Boolean Operators
true and true;
true and false;
true or false;
false or false;
</code></pre> 
<pre><code>20
7
24
2.5
2
2
Hello World!
&lt;true&gt;
&lt;false&gt;
&lt;true&gt;
&lt;false&gt;
</code></pre> <p>WendyScript also supports generic boolean operators like <code class="nostyle">>= <= == < ></code>.


					<h1 id="functions">Functions</h1>
					<p>WendyScript supports first class functions. Functions can be pass and returned through other functions. 
						Local functions can be declared within other functions.
						To bind a function to an identifier: </p>
<pre><code>let f => (x) { 
	function_body; 
};</code></pre></p> <p>WendyScript also supports recursive functions.</p>
<pre><code>let factorial => (x) { 
	if (x <= 1) {
		ret 1;
	}
	else {
		ret x * factorial(x - 1);
	};
};
@"The factorial of 5 is ";
factorial(5);</code></pre> 
<pre><code>The factorial of 5 is 120</code></pre>
					<p>Here we introduce you to the <code>ret</code> keyword. <code>ret</code> allows functions
					to return a value to the original place it was called. In this case, the returned
					value <code>120</code> was left as a top level expression and thus was printed.</p>
					<div class="alert alert-info" role="alert"><b>Note: </b>Functions that have no return
					statement or returns no value automatically returns <code>none</code>. In the case of a 
					function call, this will print <code>&lt;none&gt;</code> to the screen! The simple way 
					around that is to always return a value. 
<pre><code>let printHello => () { 
	"Hello World!";
};
printHello();</code></pre> 
					<pre>Hello World! <br>&lt;none&gt;</pre>
					<p>The <code>Hello World!</code> occurs when the function body has run and the <code>&lt;none&gt;</code> occurs when 
					the result of the <code>printHello</code> function is printed to the screen. Since the function has no return
					value, the function returns <code>none</code></p><br>
<pre><code>let printHello => () { 
	ret "Hello World!";
};
printHello();

let printHello2 => () { 
	"Hello World!";
	ret;
};
printHello2();</code></pre> 
					<p>Both of these will produce the expected behaviour: <code>Hello World!</code> Note the extra <code>ret</code> in the function body. If <code>ret</code>
					is called with no value, the function will print no value.</p>
					</div>
					
					<h2 id="lambda">Lambda</h2>
					<p>WendyScript also support lambda functions. Lambda functions can be defined using <code>#:</code>. 
					For example: </p>
<pre><code>#:(x) { ret x * 2; }</code></pre>
					<p>Lambda functions can be bound to identifiers via regular assignment, which
						is really just an alternative to using <code>=></code>.</p>
<pre><code>let f = #:(x) { ret x * 2; }; 
// is essentially the same as
let f => (x) { ret x * 2; };</code></pre>
					<p>Since functions are first class in WendyScript, 
					we can pass a function identifier, or a lambda function into other functions, as well as bind
					local functions within other functions and even return functions. Let's create a function
					named <code>apply()</code> that takes in a function that accepts two values, and two additional
					values, then applies the given function to the given two values.</p>
<pre><code>let apply => (fn, a, b) {
	ret fn(a, b);
};</code></pre>
					<p>This function can now be invoked by either passing a function identifier, or a lambda 
						function.</p>
<pre><code>let multiply => (x, y) { ret x * y; };
apply(multiply, 10, 20); // invoke with another function

apply(#:(a, b) { ret a * b; }, 10, 20); // invoke with a lambda function</code></pre>
<pre><code>200
200</code></pre>
					

					<h1 id="lists">Lists</h1>
					<p>WendyScript supports a dynamically typed collection: a list. To create a list:</p>
					<pre><code>let mylist[10] = 0;</code></pre>
					<p>This declares an array of size 10 where each element is 0.</p>
					<pre><code>let mylist = [1, 2, "hello", false];</code></pre> 
					<p>This declares an array of size 4 with the given elements. An array's elements can be accessed 
						in a similar way. For example: </p>
					<pre><code>mylist[0]; // accesses the first element
mylist[3]; // accesses the last element</code></pre>
					<p>See the code sample "<a href="#samples" class="sectionLink" data-samp="#userinputsum">User Input Sum</a>" to see how arrays can be used.</p>
					<p>When a list is pass into a function, it is always passed by reference. This is the same as assigning a list to another. A copy is not made.</p>
<pre><code>let my_fn => (lst) {
	set lst[1] = 10; // Change the second element
	ret;
};
let a = [1, 2, 3];
my_fn(a);
a;</code></pre>
<pre><code>[1, 10, 3]</code></pre>
					<p>WendyScript also has a range of operators for dealing with lists.</p>
<pre><code>// We have list equality and inequality
[10, 20, 30] != [20, 30, 10]; // true
[10, 20, 30] == [10, 20, 30]; // true

// List Concatenation
[10, 20, 30] + [20, 30, 40]; // [10, 20, 30, 20, 30, 40]

// Item Append
true + [10, 20, 30]; // [true, 10, 20, 30]
[10, 20, 30] + 40; // [10, 20, 30, 40]

// <b>in</b> operator
// Does 10 exist in the list?
10 ~ [10, 20, 30]; // true</code></pre>		

					<h1 id="objects">Objects</h1>
					<p>WendyScript also supports Object-Oriented Programming through the use
						of Structures and Structure Instances. Structures are also first class citizens
						and as such can be assigned and passed around. To create a structure, we 
						use the <code>struct</code> keyword. For example:</p>
						<pre><code>struct posn => (x, y) [print];</code></pre>
					<p>In the backend, this accomplishes several tasks. A posn structure is defined
						with two instance members: x and y, as well as a static member: print. A default
						constructor function is also created based on the instance members. This constructor
						function can be overwritten by mutating the <code>posn.init</code> function,
						but this constructor must end with <code>ret this;</code> to pass the instance
						back to the caller. </p>
					<p>Let's define what print does:</p>
						<pre><code>let posn.print => () {
	"This is a posn objet at " + this.x + ", " + this.y + ".";
	ret;
};</code></pre>
					<p>Now we can create a posn instance with: <code>let a = posn(10, 20);</code> and access
					the instance members with <code>a.x</code> and <code>a.y</code>. We can also call print with
					<code>a.print()</code>. </p>
					
					<p>Inheritance can be performed by declaring a parent for a struct. A detailed example of
						this can be found in the code sample: "<a href="#samples" class="sectionLink" data-samp="#inheritance">OOP Inheritance</a>".</p>
				

					<h1 id="conditions">Conditions</h1>
					<p>Conditions work the same way as in most languages with familiar syntax.</p>
					<pre><code>let x = 10;
if (x <= 10) {
	"X is less than or equal to 10!";
}
else {
	"X is greater than 10!";
};
</code></pre> 
					<pre><code class="nostyle">X is less than or equal to 10!</code></pre>
					<p>Conditions can also include multiple boolean expressions that are 
						joined with either <code>and</code> or <code>or</code>.</p>
<pre><code>let name = "Wendy";
let age = 18;
let valid_license = true;

if (age >= 19 and valid_license) {
	"You are old enough to drink!";
}
else if (valid_license) {
	"You're not old enough!";
}
else {
	"You don't have a valid license!";
};
</code></pre><pre><code class="nostyle">You're not old enough!</code></pre>
						

					<h1 id="loops">Loops</h1>
					<p>WendyScript supports the most basic type of loop, a loop
					that runs a set of commands based on a condition. </p>
<pre><code>let x = 5;
loop(x > 0) {
	@(x + " ");
	dec x;
};
</code></pre><pre><code class="nostyle">5 4 3 2 1 </code></pre>

					
					<h1 id="input">User Input</h1>

					<p>User input is easy in WendyScript! Input is achieved by the <code>input</code> keyword. </p>	
					<pre><code>let name;
@"What is your name? ";
input name;
@"Your name is: " + name;
</code></pre>
<pre><code class="nostyle">What is your name? Wendy<br>Your name is: Wendy</code></pre>
					<p>If the user enters a number, it will be stored as such, anything else will be stored as a string. 
						Be aware that you must declare the variable the user input is to be stored in before prompting <code>input</code>.
					</p>
					
					<h1 id="strings">Strings</h1>
					<p>In order to access
						individual characters of a string, you must first <code>explode</code> it.
						<code>explode</code> will take a identifier that stores a string, break up
						the string into a character list terminated with <code>&lt;none&gt;</code>.
						The identifier is then modified to be pointing to the start of that array. 
					</p>
<pre><code>let name = "Wendy";
// name -> "Wendy"
explode name;
// name -> "W", "e", "n", "d", "y", "&lt;none&gt;"
name[3];
</code></pre>
<pre><code>d</code></pre>
					<h1 id="time">Time</h1>
					<p>WendyScript provides the <code>time</code> keyword, which returns a UTC value of the current time.
					This is often used with <code>random.w</code> to instantiate the seed for the random number generator.</p>
<pre><code>req "random.w";
irand(time);</code></pre>

					<h1 id="samples">Code Examples</h1>
					
					<ul class="nav nav-tabs codeSampLinks">
						<li role="presentation" class="active"><a href="#reversenum">Reverse Number</a></li>
						<li role="presentation"><a href="#fibonacci">Fibonacci</a></li>
						<li role="presentation"><a href="#primes">Prime Number</a></li>
						<li role="presentation"><a href="#userinputsum">User Input Sum</a></li>
						<li role="presentation"><a href="#inheritance">OOP Inheritance</a></li>
					</ul>
					<div class="codesamp" id="reversenum">
<pre><code>// Reverse Integer: WendyScript 1.1
// reverse(num) consumes an integer and reverses the 
//   digits in the integer.
// reverse: Int -> Int
// Example: 1324 -> 4231
let reverse => (num) {
	let res = 0;
	loop (num > 0) {
		set res = res * 10;
		set res = res + (num % 10);
		set num = num \ 10;
	};
	ret res;
};

let x;
@"Input a number: ";
input x;

@"The reverse is: ";
reverse(x);</code></pre>
					</div>
					<div class="codesamp" id="fibonacci">
<pre><code>// Fibonacci Sequence: WendyScript 1.1
// gen_fibonacci_seq(num) consumes an integer and 
//   prints the first num fibonacci numbers.
// gen_fibonacci_seq: Int -> Str
// Example: 5 -> 1 1 2 3 5
let gen_fibonacci_seq => (num) {
	let prev1 = 1;
	let prev2 = 1;
	let curIndex = 0;
	loop (curIndex < num) {
		if (curIndex < 2) {
			@"1 ";
		}
		else {
			let tmp = prev1 + prev2;
			@(tmp + " ");
			set prev1 = prev2;
			set prev2 = tmp;
		};
		inc curIndex;
	};
	ret;
};

let x;
@"Input a number: ";
input x;

@"The fibonacci sequence is: ";
gen_fibonacci_seq(x);</code></pre>
					</div>
					<div class="codesamp" id="primes">
<pre><code>// Prime Number: WendyScript 1.1
// check_prime(x) consumes an integer and produces true 
//   if it's prime and false otherwise.
// check_prime: Int -> Bool
// Example: 7 -> true
let check_prime => (x) {
	if((x <= 2) and (x > 0)) {
		ret true;
	};
	if ((x < 0) or ((x % 2) == 0)) {
		ret false;
	};
	let factor = 3;
	loop (factor < (x / 2)) {
		if ((x % factor) == 0) {
			ret false;
		}
		else {
			// move to next odd factor
			inc factor;
			inc factor;
		};
	};
	ret true;
};
let x;
@"Please enter a number: ";
input x;

let res = check_prime(x);
if (res) {
	x + " is a prime!";
}
else {
	x + " is not a prime!";
};</code></pre>
					</div>

					<div class="codesamp" id="userinputsum">
<pre><code>// User Input Sum: WendyScript 1.1
let size = 0;
@"How many numbers to sum? ";
input size;

let numbers[size]; // declares array of size 
let i = 0;
loop (i < size) {
	@"Enter #" + (i + 1) + ": ";
	input numbers[i]; // input directly into array
	inc i;
};
set i = 0;
let final = 0;
loop(i < size) {
	set final = final + numbers[i]; // sum all the numbers
	inc i;	
}; 
"The sum is: " + final;</code></pre>
					</div>
					<div class="codesamp" id="inheritance">
<pre><code>// OOP Inheritance: WendyScript 1.1
req "math.w";

struct shape => (x, y) [print, pi, intersect, distance];
set shape.init => (x, y) {
	set this.x = x;
	set this.y = y;
	ret this;
};
set shape.distance => (other) {
	ret sqrt(pow(this.x - other.x, 2) + pow(this.y - other.y, 2));
};
set shape.pi = 3.14159265;
set shape.print => () {
	"This is a shape at: (" + this.x + ", " + this.y + ").";
	ret;
};
set shape.intersect => (other) {
	// If both circles?
	if (this.type == &lt;circle&gt; and other.type == &lt;circle&gt;) {
		// Two circles intersect if the distance between them is smaller than
		//   the sum of the radius.
		let result =  (this.distance(other) < (this.radius + other.radius));
		ret result;
	}
	else {
		"Must compare two circles!";
		ret;
	};
};
// Circle Object with Parent Shape
struct circle:shape => (radius) [circumference, area, print];
set circle.init => (x, y, radius) {
	set this.base = this.base.init(x, y);
	set this.radius = radius;
	ret this;
};
set circle.print => () {
	"This is a circle with radius " + this.radius + " located at (" + this.x + ", " + this.y + ").";
	ret;
};
set circle.area => () {
	ret (this.radius * this.radius) * this.pi;
};
set circle.circumference => () {
	ret (this.radius * 2) * this.pi;
};

struct rectangle:shape => (width, height) [area, perimeter, print];
set rectangle.init => (x, y, width, height) {
	set this.base = this.base.init(x, y);
	set this.width = width;
	set this.height = height;
	ret this;
};
set rectangle.area => () {
	ret this.width * this.height;
};
set rectangle.perimeter => () {
	ret 2 * (this.width + this.height);
};
set rectangle.print => () {
	"This is a rectangle with width " + this.width + " and height " + this.height
	  + " at (" + this.x + ", " + this.y + ").";
	  ret;
};

let my_c = circle(30, 40, 30);
my_c;
my_c.print();
my_c.circumference();
my_c.area();

let my_r = circle(0, 0, 20);

my_c.intersect(my_r);</code></pre>
					</div>
				</div>

				<div class="col-md-3 col-md-pull-9 navigation">
					<div class="list-group mainmenu">
						<a href="#gettingstarted" class="list-group-item list-group-item-action active">Getting Started</a>
						<a href="#introduction" class="list-group-item list-group-item-action">Introduction</a>
						<a href="#constants" class="list-group-item list-group-item-action">Constants and Variables</a>
						<a href="#operators" class="list-group-item list-group-item-action">Operators</a>
						<a href="#functions" class="list-group-item list-group-item-action">Functions</a>
						<a href="#lambda" class="list-group-item list-group-item-action">Lambda</a>
						<a href="#lists" class="list-group-item list-group-item-action">Lists</a>
						<a href="#objects" class="list-group-item list-group-item-action">Objects</a>
						<a href="#conditions" class="list-group-item list-group-item-action">Conditions</a>
						<a href="#loops" class="list-group-item list-group-item-action">Loops</a>
						<a href="#input" class="list-group-item list-group-item-action">User Input</a>
						<a href="#strings" class="list-group-item list-group-item-action">Strings</a>
						<a href="#time" class="list-group-item list-group-item-action">Time</a>
						<a href="#samples" class="list-group-item list-group-item-action">Code Examples</a>						
						<a href="reference.html" class="list-group-item list-group-item-action">Reference Manual</a>
					</div>
				</div>
			</div>
		</div>
		<div class="fewter">
				&copy; Copyright Felix Guo 2017
		</div>		
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>		
		<script src="wendyHighlighting.js" type="text/javascript"></script>
		<script src="spy.js" type="text/javascript"></script>
		<script src="scroll.js" type="text/javascript"></script>
		<script src="codesamp.js" type="text/javascript"></script>
	</body>
</html>
