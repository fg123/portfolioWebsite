<!--
Author: Felix Guo
Copyright Felix Guo 2016
-->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
		<title>WendyScript Documentation</title>

		<!-- Bootstrap -->
		<link href="bootstrap.css" rel="stylesheet">
		
		<!--Google Font Links-->
		
		<link href='//fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
		<link href='//fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
		
		
		<link rel="icon" type="image/png" href="../images/icon.png">

		<link rel="stylesheet" href="main.css" type="text/css">
		
		<link rel="stylesheet" href="wendyHighlighting.css" type="text/css">
	</head>
	<body>
	 	<div class="mainContainer">
			<div class="row title">
				<div class="col-md-12">
					<h1>Wendy<span>Script</span></h1>
					<h2>Documentation 1.1</h2>
				</div>
			</div>
			<div class="row">
				<div class="col-md-9 col-md-push-3 content">
					<!-- content -->
					<h1 style="margin-top:0px" id="gettingstarted">Getting Started</h1>
					<p>You can download Wendy, the WendyScript interpreter at: <a href="https://github.com/fg123/wendy">GitHub</a>.<br> Wendy can be run
					either with a file or in REPL mode.</p>
					<p>By typing <code>wendy</code> into the console, wendy will be run in REPL mode. Otherwise: </p>
					<pre><code>wendy <i>filename.w</i></code></pre>

					<h1 style="margin-top:0px" id="introduction">Introduction</h1>
					<p>Welcome to WendyScript, a C-syntax based scripting language! 
						Let's start with the most basic: outputting "Hello World!".</p>
					<pre><code>"Hello World!";</code></pre>
					<p>This will output <code>Hello World!</code> to the console.</p>
					<p>You may have noticed that we did not need to use a print function. This is because
						expressions evaluated at the top-level will be printed out in the console by WendyScript.</p>
					<p>Each top-level expression will be printed on seperate lines (the newline character follows the expression). For example:</p>
<pre><code>"Hello World!";
"This is on a new line!";</code></pre>
					<pre>Hello World!<br>This is on a new line!</pre>
					<p>This behaviour can be negated by adding a <code>@</code> character in the front of 
					any top-level expression:</p>
					<pre><code>@"Hello World!";
"This is on a new line!";</code></pre><pre><code>Hello World!This is on a newline!</code></pre>


					<h1 id="constants">Constants and Variables</h1>
					<p>WendyScript is dynamically typed and supports three (+ null) types of data: numbers, strings, and boolean values.</p>
<pre><code>let name = "Wendy"; // declares and sets a string variable
let age = 18; // declares and set a number variable 
let x; // declares x and sets it to &lt;none&gt;, a NULL type
let valid_license = true; // declares and sets a boolean variable

set age = 19; // mutates the value of age to be 19
set name = 20; // dynamic types allows variable types to be changed</code></pre>	
					<p>WendyScript also supports two special commands for numeric typed variables: <code>inc</code> and <code>dec</code>.
					These functions can be called to add 1 or subtract 1 to a variable respectively.</p>
<pre><code>let number = 9;
inc number; // number is now 10
dec number; // number is now 9</code></pre>	
					<div class="alert alert-warning" role="alert"><b>Note: </b><code>inc</code> and <code>dec</code> can only be called
					on non-constant variables that are numbers. Calling on a variable with string value will throw an error.</div>

					<h1 id="functions">Functions</h1>
					<p>Functions are treated as first class in WendyScript. 
						To bind a function to an identifier: </p>
<pre><code>let f => (x) { 
	function_body; 
};</code></pre></p> <p>WendyScript also supports recursive functions.</p>
<pre><code>let factorial => (x) { 
	if (x <= 1) {
		ret 1;
	}
	else {
		ret x * factorial(x - 1);
	};
};
@"The factorial of 5 is ";
factorial(5);</code></pre> 
<pre><code>The factorial of 5 is 120</code></pre>
					<p>Here we introduce you to the <code>ret</code> keyword. <code>ret</code> allows functions
					to return a value to the original place it was called. In this case, the returned
					value <code>120</code> was left as a top level expression and thus was printed.</p>
					<p>Since functions are first class, we can pass a function identifier into other functions, as well as bind
					local functions within other functions and even return those functions. The function identifier itself is
					simply a pointer to the start of the instruction block.</p>
					<div class="alert alert-info" role="alert"><b>Note: </b>Functions that have no return
					statement or returns no value automatically returns <code>none</code>. In the case of a 
					top level function call, this will print <code>&lt;none&gt;</code> to the screen! The simple way 
					around that is to always return a value. 
<pre><code>let printHello => () { 
	"Hello World!";
};
printHello();</code></pre> 
					<pre>Hello World! <br>&lt;none&gt;</pre>
					<p>The <code>Hello World!</code> occurs when the function body has run and the <code>&lt;none&gt;</code> occurs when 
					the result of the <code>printHello</code> function is printed to the screen. Since the function has no return
					value, the function returns <code>none</code></p><br>
<pre><code>let printHello => () { 
	ret "Hello World!";
};
printHello();

let printHello2 => () { 
	"Hello World!";
	ret;
};
printHello2();</code></pre> 
	<p>Both of these will produce the expected behaviour: <code>Hello World!</code> Note the extra <code>ret</code> in the function body. If <code>ret</code>
	is called with no value, the function returns no printable value.</p>
	</div>

					<h1 id="arrays">Arrays and Pointers</h1>
					<p>Arrays are also dynamically typed in WendyScript, and can be defined as a constant or a variable. An
						array is declared as below:</p>
					<pre><code>let myarray[10] = 0;</code></pre>
					<p>This declares an array of size 10 where each element is 0. An array's elements can be accessed 
						in a similar way. For example: </p>
					<pre><code>myarray[0]; // accesses the first element
myarray[9]; // accesses the last element</code></pre>
					<p>See the code sample "<a href="#samples" class="sectionLink" data-samp="#userinputsum">User Input Sum</a>" to see how arrays can be used.</p>
					<p>Passing around arrays are a bit more complicated. Arrays in WendyScript are much like arrays in C. When
						an array of size 10 is declared, Wendy reserves 10 blocks of memory space. The bound identifier simply
						points to the first element. If you were to pass that identifier into a function, only the first element
						will be scoped into the function:</p>
<pre><code>let my_fn => (arr) {
	ret arr[1]; // I want to access the second element
};
let a[2];
set a[0] = 3;
set a[1] = 4;
my_fn(a); // should return 4</code></pre>
<pre><code>Runtime Error at Line 2: Reference to Memory Out of Range!
&lt;none&gt;</code></pre>
					<p>This error occurs because when <code>a</code> is passed to <code>my_fn()</code>, the interpreter evaluates
					the argument <code>a</code> and passes the value, <code>3</code> to the function. The function cannot interpret the
					value <code>arr[1]</code> as it's stored in a different memory space.</p>
					<div class="alert alert-info" role="alert"><b>Note: </b>Arguments passed to functions are evaluated when
					the function is called (ie. always passed by value).</div>
					<p>The way around this issue is to use pointers instead. Pointers are simply integers that refer to the 
						place in memory that a particular value is at. Instead of passing <code>a</code> into the function, we
						pass the address: <code>&a</code>. The <code>&</code> operator is used to access addresses of identifiers. 
						We can get the value located at the address by using the <code>*</code> operator. The updated, working code looks like this:</p>
<pre><code>let my_fn => (arr) {
	// arr is now the pointer to the first element
	ret *(arr + 1); // I want to access the second element
};
let a[2];
set a[0] = 3;
set a[1] = 4;
my_fn(&a); // should return 4</code></pre>
<pre><code>4</code></pre>


					<h1 id="objects">Objects</h1>
					<p>Using arrays, we are able to create a pseudo-objects. For example, if I wanted to create
						a Point object that had two fields, x and y, I could write a constructor:</p>
<pre><code>let point => (x, y) {
	let newpoint[2];
	set newpoint[0] = x;
	set newpoint[1] = y;
	ret (&newpoint);
};</code></pre> 
					<p>Calling <code>let p = point(10, 20);</code> will now store the pointer to the
					two components in the variable p. I can now write two accessor functions to retrieve each
					component.</p>
<pre><code>let point_x => (point) {
	ret *point;
};
let point_y => (point) {
	ret *(point + 1);
};</code></pre>
					<p>Now if I call <code>point_x(p);</code> I will get 10, and if I call <code>point_y(p);</code> I will get
					20. Since p is simply a pointer to the point, I can pass it around as if it was an object as long as I 
					always access the corresponding component values using my accessor functions.</p>

					<p>This process might seem tedious in WendyScript if we wanted to implement structures with many fields, 
						so we have built in structures that make use of this
						array-based data storage! The above code can be simplified to: </p>
<pre><code>struct point => (x, y);
let p = point(10, 20);
point_x(p);
point_y(p);</code></pre>
<pre><code>10
20</code></pre>
					<p>As you can see, the definition of a <code>struct</code> automatically creates constructor and
					accessor functions for all of the fields defined.</p> 

					<h1 id="operators">Operators</h1>
					<p>Operators in WendyScript are shown below.</p>
					<pre><code>10 + 10; // Addition
9 - 2; // Subtraction
3 * 8; // Multiplication
10 / 4; // Floating Point Division
10 \ 4; // Integer Division
((1 + 2) * 10) / (5 * 3); // Any Combination
"Hello " + "World!"; // String Concatenation 

// Boolean Combiners
true and true;
true and false;
true or false;
false or false;
</code></pre> 
<pre><code>20
7
24
2.5
2
2
Hello World!
&lt;true&gt;
&lt;false&gt;
&lt;true&gt;
&lt;false&gt;
</code></pre> <p>WendyScript also supports generic boolean operators like <code class="nostyle">>= <= == < ></code>.


					<h1 id="conditions">Conditions</h1>
					<p>Conditions work the same way as in most languages with familiar syntax.</p>
					<pre><code>let x = 10;
if (x <= 10) {
	"X is less than or equal to 10!";
}
else {
	"X is greater than 10!";
};
</code></pre> 
					<pre><code class="nostyle">X is less than or equal to 10!</code></pre>
					<p>Conditions can also include multiple boolean expressions that are 
						joined with either <code>and</code> or <code>or</code>.</p>
<pre><code>let name = "Wendy";
let age = 18;
let valid_license = true;

if (age >= 19 and valid_license) {
	"You are old enough to drink!";
}
else if (valid_license) {
	"You're not old enough!";
}
else {
	"You don't have a valid license!";
};
</code></pre><pre><code class="nostyle">You're not old enough!</code></pre>
						

					<h1 id="loops">Loops</h1>
					<p>WendyScript supports the most basic type of loop, a loop
					that runs a function block based on a condition. </p>
<pre><code>let x = 5;
loop(x > 0) {
	@(x + " ");
	dec x;
};
</code></pre><pre><code class="nostyle">5 4 3 2 1 </code></pre>

					
					<h1 id="input">User Input</h1>

					<p>User input is easy in WendyScript! Input is achieved by the <code>input</code> keyword. </p>	
					<pre><code>let name;
@"What is your name? ";
input name;
@"Your name is: " + name;
</code></pre>
<pre><code class="nostyle">What is your name? Wendy<br>Your name is: Wendy</code></pre>
					<p>If the user enters a number, it will be stored as such, anything else will be stored as a string. 
						Be aware that you must declare the variable the user input is to be stored in before prompting <code>input</code>.
					</p>


					<h1 id="samples">Code Examples</h1>
					
					<ul class="nav nav-tabs codeSampLinks">
						<li role="presentation" class="active"><a href="#reversenum">Reverse Number</a></li>
						<li role="presentation"><a href="#fibonacci">Fibonacci Sequence</a></li>
						<li role="presentation"><a href="#primes">Prime Number</a></li>
						<li role="presentation"><a href="#userinputsum">User Input Sum</a></li>
					</ul>
					<div class="codesamp" id="reversenum">
<pre><code>// Reverse Integer: WendyScript 1.0
// reverse(num) consumes an integer and reverses the 
//   digits in the integer.
// reverse: Int -> Int
// Example: 1324 -> 4231
let reverse => (num) {
	let res = 0;
	loop (num > 0) {
		set res = res * 10;
		set res = res + (num % 10);
		set num = num \ 10;
	};
	ret res;
};

let x;
@"Input a number: ";
input x;

@"The reverse is: ";
reverse(x);</code></pre>
					</div>
					<div class="codesamp" id="fibonacci">
<pre><code>// Fibonacci Sequence: WendyScript 1.0
// gen_fibonacci_seq(num) consumes an integer and 
//   prints the first num fibonacci numbers.
// gen_fibonacci_seq: Int -> Str
// Example: 5 -> 1 1 2 3 5
let gen_fibonacci_seq => (num) {
	let prev1 = 1;
	let prev2 = 1;
	let curIndex = 0;
	loop (curIndex < num) {
		if (curIndex < 2) {
			@"1 ";
		}
		else {
			let tmp = prev1 + prev2;
			@(tmp + " ");
			set prev1 = prev2;
			set prev2 = tmp;
		};
		inc curIndex;
	};
	ret @"";
};

let x;
@"Input a number: ";
input x;

@"The fibonacci sequence is: ";
gen_fibonacci_seq(x);</code></pre>
					</div>
					<div class="codesamp" id="primes">
<pre><code>// Prime Number: WendyScript 1.0
// check_prime(x) consumes an integer and produces true 
//   if it's prime and false otherwise.
// check_prime: Int -> Bool
// Example: 7 -> true
let check_prime => (x) {
	if((x <= 2) and (x > 0)) {
		ret true;
	};
	if ((x < 0) or ((x % 2) == 0)) {
		ret false;
	};
	let factor = 3;
	loop (factor < (x / 2)) {
		if ((x % factor) == 0) {
			ret false;
		}
		else {
			// move to next odd factor
			inc factor;
			inc factor;
		};
	};
	ret true;
};
let x;
@"Please enter a number: ";
input x;

let res = check_prime(x);
if (res) {
	x + " is a prime!";
}
else {
	x + " is not a prime!";
};</code></pre>
					</div>

					<div class="codesamp" id="userinputsum">
<pre><code>// User Input Sum: WendyScript 1.0
let size = 0;
@"How many numbers to sum? ";
input size;

let numbers[size]; // declares array of size 
let i = 0;
loop (i < size) {
	@"Enter #" + (i + 1) + ": ";
	input numbers[i]; // input directly into array
	inc i;
};
set i = 0;
let final = 0;
loop(i < size) {
	set final = final + numbers[i]; // sum all the numbers
	inc i;	
}; 
"The sum is: " + final;</code></pre>
					</div>

					<h1 id="reference">Reference</h1>
					<div class="references">
						<p>
							Instructions/Commands: 
							<code>let</code>
							<code>set</code>
							<code>memset</code>
							<code>ret</code>
							<code>inc</code>
							<code>dec</code>
							<code>struct</code>
							<code>input</code>
						</p>
						<p>
							Control Flow:
							<code>if else</code>
							<code>loop</code>
						</p>
						<p>
							<a href="reference.html?q=op">Math/Memory/Boolean Operators</a>
						</p>
					</div>
				</div>

				<div class="col-md-3 col-md-pull-9 navigation">
					<div class="list-group mainmenu">
						<a href="#gettingstarted" class="list-group-item list-group-item-action active">Getting Started</a>
						<a href="#introduction" class="list-group-item list-group-item-action">Introduction</a>
						<a href="#constants" class="list-group-item list-group-item-action">Constants and Variables</a>
						<a href="#functions" class="list-group-item list-group-item-action">Functions</a>
						<a href="#arrays" class="list-group-item list-group-item-action">Arrays and Pointers</a>
						<a href="#objects" class="list-group-item list-group-item-action">Objects</a>
						<a href="#operators" class="list-group-item list-group-item-action">Operators</a>
						<a href="#conditions" class="list-group-item list-group-item-action">Conditions</a>
						<a href="#loops" class="list-group-item list-group-item-action">Loops</a>
						<a href="#input" class="list-group-item list-group-item-action">User Input</a>
						<a href="#samples" class="list-group-item list-group-item-action">Code Examples</a>						
						<a href="#reference" class="list-group-item list-group-item-action">Reference</a>
					</div>
				</div>
			</div>
		</div>
		<div class="fewter">
				&copy; Copyright Felix Guo 2017
		</div>		
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>		
		<script src="wendyHighlighting.js" type="text/javascript"></script>
		<script src="spy.js" type="text/javascript"></script>
		<script src="scroll.js" type="text/javascript"></script>
		<script src="codesamp.js" type="text/javascript"></script>
	</body>
</html>
